---
title: "[ Leetcode 190 ] Reverse Bits | è§£é¡Œæ€è·¯åˆ†äº«"
date: "2025-04-14"
author: James
tags: Bit Manipulation,Divide and Conquer
difficulty: Easy
image: /images/program/Leetcode.jpeg
description: ""
readTime: 3
---

çµ¦ä¸€å€‹ 32 bits unsigned integerï¼Œreturn reversed éçš„æ•¸ã€‚

é¡Œç›®é€£çµ ğŸ”—ï¼š[https://leetcode.com/problems/reverse-bits/](https://leetcode.com/problems/reverse-bits/)

### **å•é¡Œåˆ†æ**

å…ˆè¨˜éŒ„ä¸€ä¸‹ï¼Œé€™æ˜¯æˆ‘çš„ç¬¬ä¸€é¡Œ Bit Manipulationï¼Œä»¥å‰çœ‹åˆ° Bit Manipulation éƒ½ä¸å¤ªæƒ³å­¸ç›´æ¥å…ˆè·³éï¼Œç¾åœ¨è¦å›ä¾†é‚„å‚µäº†ã€‚

å¦‚æœæ˜¯æŒ‰ç…§ä¸€èˆ¬ vector çš„é‚è¼¯ï¼Œè¦ reverse ä¸€å€‹ vectorï¼Œå¯èƒ½å°±æ˜¯åˆ©ç”¨ä¸€å€‹ `right` pointer ä¸€ç›´ç´€éŒ„æœ€å¾Œä¸€å€‹æ•¸å­—ï¼Œç„¶å¾ŒæŠŠä»–å¡åˆ°å¦ä¸€å€‹ vector è£¡é¢ï¼Œ`right` ä¸€ç›´ç¸®é€²ä¾†ç›´åˆ°çµæŸå°±å¯ä»¥äº†ï¼Œæ‰€ä»¥åˆæ­¥åˆ¤æ–· Reverse Bits æ‡‰è©²ä¹Ÿæ˜¯å·®ä¸å¤šæ€è·¯ï¼Œä¸€ç›´ç´€éŒ„æœ€å¾Œä¸€å€‹ bitï¼Œç„¶å¾Œå¡åˆ°å¦ä¸€å€‹ uint32_t è£¡ï¼Œæ‰€ä»¥é—œéµå°±æ˜¯æ€éº¼é”æˆã€Œç´€éŒ„æœ€å¾Œä¸€å€‹ bitã€é€™ä»¶äº‹ã€‚

### **è§£é¡Œæ€è·¯ - Bit Manipulation**

ã€Œä¿ç•™æŸæŸä½æ•¸ã€é€™ä»¶äº‹æƒ…ï¼Œä¸€å¾‹ä½¿ç”¨ bitmask ä¾†è§£æ±ºï¼Œè¦ä¿ç•™å“ªä¸€ä½æ•¸ mask å°±è¨­ç‚º 1ï¼Œç„¶å¾Œè·ŸåŸæœ¬çš„ unsigned int åš `and` operationï¼Œèˆ‰å€‹ä¾‹å­ï¼Œæœ‰å€‹æ•¸ `n = 1010` æƒ³è¦ä¿ç•™æœ€å¾Œå…©ä½æ•¸ï¼š

```
n    = 1010
mask = 0011
newNum = n & mask = 0010
```

æ‰€ä»¥å›åˆ°é€™é¡Œä¹Ÿæ˜¯åŒç†ï¼Œn è¦ä¿ç•™æœ€å¾Œä¸€ä½ï¼Œæ‰€ä»¥å°±ç”¨ (n & 1) å°±å¯ä»¥ä¿ç•™æœ€å¾Œä¸€ä½äº†ã€‚

```cpp
uint32_t tmp = (n & 1);
```

å†ä¾†å°±è¦æŠŠé€™å€‹ bitã€Œæ¥åˆ°ã€result å¾Œé¢ï¼Œæ‰€ä»¥ result å…ˆå·¦ shiftï¼Œå†ä¾†è·Ÿ tmp åš `or` operation å°±å¯ä»¥æ¥ä¸Šå»äº†ï¼Œæœ€å¾Œ n å¾€å³ shift éœ²å‡ºä¸‹ä¸€å€‹ bitï¼Œé‡è¤‡é€™å€‹éç¨‹ç›´åˆ° 32 å€‹ bit éƒ½åšå®Œå°±çµæŸäº†ã€‚

**Time Complexity** - `O(32) = O(1)`<br>
**Space Complexity** - `O(1)`

#### **Implementation**

```cpp
uint32_t reverseBits(uint32_t n) {
    uint32_t result = 0;
    for(int i = 0; i < 32; ++i) {
        result = (result << 1) | (n & 1);
        n >>= 1;                    
    }
    return result;
}
```

### **æ™‚é–“å„ªåŒ– - Divide and Conquer**

çµæœæ²’æƒ³åˆ°é€™é¡Œé‚„å¯ä»¥å†å„ªåŒ–ï¼Œç›´æ¥èˆ‰ä¾‹ä¾†çœ‹ï¼Œå¦‚æœä»Šå¤©æœ‰ä¸€å€‹ 8 bits çš„æ•¸æƒ³è¦ reverse

```
n = abcdefgh
```

å°æ–¼ 2^n bits çš„æ•¸ä¾†èªªï¼Œreverse çš„éç¨‹å°±æ˜¯å°ç¨±äº¤æ›ï¼Œå·¦é‚Šçš„ bit æœƒè·‘åˆ°å³é‚Šå°æ‡‰çš„ä½å­ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ç›´æ¥å…ˆåˆ‡å°åŠæŠŠå·¦å³äº¤æ›ï¼Œç„¶å¾Œå†åˆ‡å°åŠä¸€æ¬¡æŠŠå·¦å³äº¤æ›ï¼Œä¸€ç›´åˆ‡åˆ‡åˆ°åº•å°±é”æˆ reverse çš„æ•ˆæœäº†ï¼Œç”¨ä¸Šé¢çš„ä¾‹å­ä¾†èªª

```cpp
n = abcdefgh
n = efgh abcd // åˆ‡å°åŠäº¤æ›
n = gh ef cd ab // å†åˆ‡ä¸€æ¬¡
n = h g f e d c b a // å†åˆ‡ä¸€æ¬¡
```

æ‰€ä»¥å°æ–¼ 2^n å€‹ bits ä¾†èªªï¼Œåªéœ€è¦ swap n æ¬¡å°±å¯ä»¥è§£äº†ï¼Œå†ä¾†è¨è«–å¦‚ä½•é€²è¡Œ swap çš„å‹•ä½œï¼Œä¸€æ¨£èˆ‰ 8 bits çš„æ•¸å­—ç‚ºä¾‹ï¼Œç¬¬ä¸€æ­¥å…ˆåˆ‡å°åŠäº¤æ›ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦ bitmask ä¿ç•™å·¦åŠéƒ¨ç„¶å¾Œ shift åˆ°å³é‚Šï¼Œä¹Ÿéœ€è¦ bitmask ä¿ç•™å³åŠéƒ¨ç„¶å¾Œ shift åˆ°å·¦é‚Šï¼Œå…ˆä¾†çœ‹ç¬¬ä¸€æ­¥

ä¿ç•™å·¦åŠéƒ¨çš„ mask æ˜¯ 0b11110000ï¼Œå¯«æˆåå…­é€²ä½æ˜¯ 0xf0 ( æ¯å››å€‹ bits ä¸€çµ„ä¾†çœ‹ )ï¼Œç„¶å¾Œ right shift å››æ¬¡å¯ä»¥åˆ°å³é‚Šï¼Œä¿ç•™å³åŠéƒ¨çš„ mask æ˜¯ 0b00001111ï¼Œå¯«æˆåå…­é€²ä½æ˜¯ 0x0fï¼Œç„¶å¾Œ left shift å››æ¬¡å¯ä»¥åˆ°å·¦é‚Šï¼Œæ‰€ä»¥å¯«æˆ code å°±æ˜¯é€™æ¨£ï¼š

```cpp
n = (n & 0xf0) >> 4 | (n & 0x0f) << 4;
```

å†ä¾†ç¬¬äºŒæ­¥é–‹å§‹æ‡‰è©²å°±å¯ä»¥èˆ‰ä¸€åä¸‰äº†ï¼Œå°æ–¼æ¯å››å€‹ bits æˆ‘å€‘è¦å†åˆ‡å°åŠï¼Œæ‰€ä»¥å·¦é‚Šçš„ mask æ˜¯ 0b11001100ï¼Œä¹Ÿå°±æ˜¯ 0xccï¼Œè¦ right shift å…©æ¬¡ï¼Œå³é‚Šçš„ mask æ˜¯ 0b00110011ï¼Œä¹Ÿå°±æ˜¯ 0x33ï¼Œè¦ left shift å…©æ¬¡ï¼Œå¯«æˆ code å°±æ˜¯ï¼š

```cpp
n = (n & 0xcc) >> 2 | (n & 0x33) << 2;
```

ä»¥ä¸Šéƒ½æ˜¯ 8 å€‹ bits çš„ç‹€æ…‹ï¼Œè€Œé¡Œç›®çµ¦çš„äº‹ uint32_tï¼Œé‚£ä¸€æ¨£èˆ‰ä¸€åä¸‰ï¼Œæˆ‘å€‘åªè¦ swap 5 æ¬¡å°±å¯ä»¥äº†ï¼Œç›´æ¥é™„ä¸Šç¨‹å¼ç¢¼

**Time Complexity** - `O(1)`<br>
**Space Complexity** - `O(1)`

#### **Implementation**

```cpp
uint32_t reverseBits(uint32_t n) {

    n = (n & 0xffff0000) >> 16 | (n & 0x0000ffff) << 16;
    n = (n & 0xff00ff00) >> 8 | (n & 0x00ff00ff) << 8;
    n = (n & 0xf0f0f0f0) >> 4 | (n & 0x0f0f0f0f) << 4;
    n = (n & 0xcccccccc) >> 2 | (n & 0x33333333) << 2;
    n = (n & 0xaaaaaaaa) >> 1 | (n & 0x55555555) << 1;
    
    return n;
}
```

### **Follow up**

é€™é¡Œé¡Œç›®çµ¦äº†å¦ä¸€å€‹å»¶ä¼¸æ€è€ƒï¼Œå¦‚æœ Bit Reverse éœ€è¦ reverse ç„¡é™å¤šæ¬¡çš„è©±ï¼Œä¸€å®šæœƒæœ‰é‡è¤‡çš„ç‹€æ³ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ç”¨ Hash Table ç›´æ¥ cacheï¼Œé€™æ¨£å°±å¯ä»¥ç›´æ¥æŸ¥è¡¨ï¼Œä½†æ˜¯ 2^32 å¤ªå¤§äº†æ²’æœ‰è¾¦æ³•å…¨éƒ¨éƒ½å­˜åˆ° Hash Tableï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ï¼Œcache ä½ 8 bits çš„æƒ…æ³å°±å¥½ï¼Œæ‰€ä»¥æˆ‘å€‘æŠŠ 32 bits åˆ†å‰²æˆ 4 å€‹ 8 bits çš„ blockï¼ŒæŸ¥å››æ¬¡è¡¨ï¼Œæœ€å¾Œå†æ‹¼å›ä»–å€‘æ­£ç¢ºçš„åœ°æ–¹ã€‚

#### **Implementation**

```cpp
uint32_t reverseBits(uint32_t n) {
    uint8_t reverse_table[256];

    for(int i=0; i<256; i++){
        uint8_t x = i;
        x = (x & 0xf0) >> 4 | (x & 0x0f) << 4;
        x = (x & 0xcc) >> 2 | (x & 0x33) << 2;
        x = (x & 0xaa) >> 1 | (x & 0x55) << 1;
        reverse_table[i] = x;
    }

    return (reverse_table[n & 0xff] << 24) |
        (reverse_table[(n >> 8) & 0xff] << 16) |
        (reverse_table[(n >> 16) & 0xff] << 8) |
        (reverse_table[(n >> 24) & 0xff]);

}
```